
function run_localnet(){
  cd ./tezos
  
  docker ps | grep localnet_node_1 &> /dev/null
  if [ $? == 0 ]; then  # if process is running
    ./scripts/localnet.sh stop  # then stop the cluster
  fi

  ./scripts/localnet.sh start
  cd ..
}

[ "$1" != "skip" ] && ./bake_localnet.sh

run_localnet


docker cp main.tz localnet_node_1:/usr/local/tezos
docker cp storage.tz localnet_node_1:/usr/local/tezos
docker cp sandbox_init.sh localnet_node_1:/usr/local/tezos
docker cp sandbox_deploy_level_lock.sh localnet_node_1:/usr/local/tezos

./check_container.sh